<view class="main-page">
  <!-- é¡¶éƒ¨Header -->
  <view class="header">
    <view class="header-left">
      <view class="logo">ğŸ“š</view>
      <text class="platform-name">çˆ±ä»æ¸¸</text>
    </view>
    <view class="header-right">
      <view class="active-courses">
        <text class="active-icon">ğŸ‘¥</text>
        <text class="active-text">{{activeCourseCount}}ä¸ªæ´»è·ƒè¯¾ç¨‹</text>
      </view>
    </view>
  </view>

  <!-- è¯¾ç¨‹å¡ç‰‡ -->
  <view class="course-card">
    <!-- åœ¨åŸæœ‰å†…å®¹åŸºç¡€ä¸Šæ·»åŠ  -->
    <van-button
      type="info"
      block
      bindtap="enterDashboard"
      style="margin-top: 20rpx;"
    >
      æŸ¥çœ‹ä¸ªäººæ•°æ®çœ‹æ¿
    </van-button>
    <!-- è¯¾ç¨‹ä¿¡æ¯ -->
    <view class="course-info">
      <view class="course-title">{{courseInfo.title}}</view>
      <view class="course-term">{{courseInfo.term}}</view>
      <view class="course-desc">{{courseInfo.desc}}</view>
    </view>
  </view>

  <!-- æœç´¢æ  -->
  <view class="search-section">
    <van-search
      value="{{searchKeyword}}"
      placeholder="æœç´¢è¯¾ç¨‹..."
      bind:search="onSearch"
      bind:change="onSearchChange"
      shape="round"
      background="transparent"
      custom-class="custom-search"
    />
  </view>

  <!-- å­¦æœŸç­›é€‰ -->
  <scroll-view class="filter-scroll" scroll-x="true" enable-flex="true" scroll-with-animation="true">
    <view class="filter-section">
      <view 
        class="filter-btn {{selectedTerm === item ? 'active' : ''}}"
        wx:for="{{terms}}"
        wx:key="index"
        data-term="{{item}}"
        bindtap="selectTerm"
      >
        {{item}}
      </view>
    </view>
  </scroll-view>

  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <view class="courses-container">
    <view 
      class="course-card"
      wx:for="{{courses}}"
      wx:key="id"
      data-id="{{item.id}}"
      bindtap="enterCourse"
    >
      <!-- è¯¾ç¨‹å°é¢ï¼ˆæ¸å˜èƒŒæ™¯ï¼‰ -->
      <view class="course-header" style="background: linear-gradient(135deg, {{item.coverColor}} 0%, {{item.coverColor}}dd 100%);">
      </view>
      
      <!-- è¯¾ç¨‹ä¿¡æ¯ -->
      <view class="course-info">
        <view class="course-title">{{item.title}}</view>
        <view class="course-term">{{item.term}}</view>
        <view class="course-desc">{{item.description}}</view>
      </view>
      
      <!-- å­¦ä¹ è¿›åº¦ -->
      <view class="progress-section">
        <view class="progress-label">å­¦ä¹ è¿›åº¦</view>
        <view class="progress-wrapper">
          <van-progress 
            percentage="{{item.progress}}" 
            stroke-width="8"
            color="{{item.coverColor}}"
            inactive-color="#ebedf0"
          />
          <text class="progress-text">{{item.progress}}%</text>
        </view>
      </view>
      
      <!-- ç»Ÿè®¡å¡ç‰‡ -->
      <view class="stats-section">
        <view class="stat-card">
          <view class="stat-value" style="color: {{item.coverColor}};">{{item.totalTasks}}</view>
          <view class="stat-label">æ€»ä»»åŠ¡æ•°</view>
        </view>
        <view class="stat-card">
          <view class="stat-value" style="color: {{item.coverColor}};">{{item.completedTasks}}</view>
          <view class="stat-label">å·²å®Œæˆ</view>
        </view>
        <view class="stat-card">
          <view class="stat-value" style="color: {{item.coverColor}};">{{item.completionRate}}%</view>
          <view class="stat-label">å®Œæˆç‡</view>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <van-loading type="spinner" size="24px">åŠ è½½ä¸­...</van-loading>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{!loading && courses.length === 0}}">
    <text>æš‚æ— è¯¾ç¨‹æ•°æ®</text>
  </view>
</view>
